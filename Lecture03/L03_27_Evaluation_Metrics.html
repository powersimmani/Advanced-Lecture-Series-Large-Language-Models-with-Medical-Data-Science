<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluation Metrics</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 960px;
            height: 540px;
            padding: 35px 45px;
            background: white;
        }
        .title {
            font-size: 32px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .metrics-visualization {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .threshold-guide {
            background: #fff8e6;
            border-radius: 8px;
            padding: 12px;
        }
        .guide-title {
            font-size: 14px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 8px;
            text-align: center;
        }
        .thresholds {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        .threshold {
            font-size: 11px;
            color: #333;
            padding: 6px;
            background: white;
            border-radius: 5px;
            text-align: center;
        }
        
        @keyframes fillBar {
            from { width: 0; }
            to { width: var(--bar-width); }
        }
        
        @keyframes drawLine {
            from { stroke-dashoffset: 1000; }
            to { stroke-dashoffset: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Evaluation Metrics</div>
        
        <div class="metrics-visualization">
            <svg width="900" height="380" viewBox="0 0 900 380" xmlns="http://www.w3.org/2000/svg">
                <!-- Three metric categories -->
                
                <!-- Retrieval Metrics -->
                <g transform="translate(20, 20)">
                    <rect x="0" y="0" width="270" height="340" rx="10" fill="#f0f5fc" stroke="#1E64C8" stroke-width="2"/>
                    <text x="135" y="25" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="#1E64C8">
                        üîç Retrieval Metrics
                    </text>
                    
                    <!-- Precision@K Visual -->
                    <g transform="translate(20, 45)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#2874d8">Precision@10</text>
                        <rect x="0" y="20" width="230" height="30" rx="4" fill="#e8f2ff"/>
                        
                        <!-- Visual representation of results -->
                        <g transform="translate(5, 25)">
                            <!-- Relevant items (green) -->
                            <rect x="0" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="23" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="46" y="0" width="20" height="20" rx="2" fill="#dc3545"/>
                            <rect x="69" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="92" y="0" width="20" height="20" rx="2" fill="#dc3545"/>
                            <rect x="115" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="138" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="161" y="0" width="20" height="20" rx="2" fill="#dc3545"/>
                            <rect x="184" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                            <rect x="207" y="0" width="20" height="20" rx="2" fill="#28a745"/>
                        </g>
                        
                        <text x="0" y="70" font-family="Aptos" font-size="11" fill="#555">Formula: relevant/K = 7/10 = 70%</text>
                    </g>
                    
                    <!-- Recall@K Visual -->
                    <g transform="translate(20, 130)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#2874d8">Recall@10</text>
                        <rect x="0" y="20" width="230" height="40" rx="4" fill="#e8f2ff"/>
                        
                        <!-- Pool of all relevant -->
                        <g transform="translate(10, 25)">
                            <text x="0" y="10" font-family="Aptos" font-size="9" fill="#666">Found: 7</text>
                            <rect x="0" y="15" width="105" height="15" rx="2" fill="#28a745" opacity="0.8"/>
                            
                            <text x="120" y="10" font-family="Aptos" font-size="9" fill="#666">Missed: 5</text>
                            <rect x="120" y="15" width="75" height="15" rx="2" fill="#dc3545" opacity="0.3"/>
                        </g>
                        
                        <text x="0" y="80" font-family="Aptos" font-size="11" fill="#555">Formula: found/total = 7/12 = 58%</text>
                    </g>
                    
                    <!-- NDCG Visual -->
                    <g transform="translate(20, 225)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#2874d8">NDCG Score</text>
                        <rect x="0" y="20" width="230" height="50" rx="4" fill="#e8f2ff"/>
                        
                        <!-- Ranking visualization -->
                        <g transform="translate(10, 30)">
                            <rect x="0" y="0" width="40" height="8" fill="#1E64C8" opacity="1.0"/>
                            <rect x="0" y="10" width="35" height="8" fill="#1E64C8" opacity="0.8"/>
                            <rect x="0" y="20" width="28" height="8" fill="#1E64C8" opacity="0.6"/>
                            <rect x="0" y="30" width="20" height="8" fill="#1E64C8" opacity="0.4"/>
                            
                            <text x="50" y="20" font-family="Aptos" font-size="10" fill="#666">Position weight decay</text>
                        </g>
                        
                        <text x="0" y="90" font-family="Aptos" font-size="11" fill="#555">Score: 0.85 (considers rank order)</text>
                    </g>
                </g>
                
                <!-- Generation Metrics -->
                <g transform="translate(310, 20)">
                    <rect x="0" y="0" width="270" height="340" rx="10" fill="#fff8e6" stroke="#ff9800" stroke-width="2"/>
                    <text x="135" y="25" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="#ff9800">
                        üìù Generation Metrics
                    </text>
                    
                    <!-- ROUGE-L Visual -->
                    <g transform="translate(20, 45)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#ff9800">ROUGE-L Score</text>
                        
                        <!-- Text comparison visualization -->
                        <rect x="0" y="20" width="230" height="60" rx="4" fill="#fff3e0"/>
                        <g transform="translate(10, 25)">
                            <text x="0" y="10" font-family="Aptos" font-size="9" fill="#666">Generated:</text>
                            <text x="0" y="22" font-family="Courier" font-size="9" fill="#333">Diabetes requires insulin therapy</text>
                            
                            <text x="0" y="37" font-family="Aptos" font-size="9" fill="#666">Reference:</text>
                            <text x="0" y="49" font-family="Courier" font-size="9" fill="#333">Diabetes needs insulin treatment</text>
                            
                            <!-- Highlight matching -->
                            <rect x="0" y="13" width="50" height="10" fill="#ffc107" opacity="0.3"/>
                            <rect x="85" y="13" width="35" height="10" fill="#ffc107" opacity="0.3"/>
                            <rect x="0" y="40" width="50" height="10" fill="#ffc107" opacity="0.3"/>
                            <rect x="80" y="40" width="35" height="10" fill="#ffc107" opacity="0.3"/>
                        </g>
                        
                        <text x="0" y="100" font-family="Aptos" font-size="11" fill="#555">LCS match: 75%</text>
                    </g>
                    
                    <!-- BERTScore Visual -->
                    <g transform="translate(20, 155)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#ff9800">BERTScore</text>
                        
                        <!-- Semantic similarity -->
                        <rect x="0" y="20" width="230" height="80" rx="4" fill="#fff3e0"/>
                        <g transform="translate(15, 30)">
                            <!-- Vector representations -->
                            <circle cx="50" cy="30" r="25" fill="#ff9800" opacity="0.2"/>
                            <circle cx="150" cy="30" r="25" fill="#ff9800" opacity="0.2"/>
                            <circle cx="100" cy="30" r="35" fill="#ffc107" opacity="0.3"/>
                            
                            <text x="50" y="35" text-anchor="middle" font-family="Aptos" font-size="10" fill="#333">Gen</text>
                            <text x="150" y="35" text-anchor="middle" font-family="Aptos" font-size="10" fill="#333">Ref</text>
                            
                            <!-- Similarity line -->
                            <line x1="75" y1="30" x2="125" y2="30" stroke="#ff9800" stroke-width="2" stroke-dasharray="3,2"/>
                            <text x="100" y="10" text-anchor="middle" font-family="Aptos" font-size="9" fill="#666">Cosine: 0.92</text>
                        </g>
                        
                        <text x="0" y="120" font-family="Aptos" font-size="11" fill="#555">Semantic similarity: 92%</text>
                    </g>
                    
                    <!-- Hallucination Rate -->
                    <g transform="translate(20, 285)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#ff9800">Hallucination Rate</text>
                        
                        <!-- Progress bar -->
                        <rect x="0" y="20" width="230" height="25" rx="4" fill="#fff3e0"/>
                        <rect x="5" y="23" width="220" height="19" rx="3" fill="#f0f0f0"/>
                        <rect x="5" y="23" width="11" height="19" rx="3" fill="#28a745">
                            <animate attributeName="width" from="0" to="11" dur="1.5s" fill="freeze"/>
                        </rect>
                        
                        <text x="115" y="36" text-anchor="middle" font-family="Aptos" font-size="11" font-weight="600" fill="#333">2% (Target: <5%)</text>
                    </g>
                </g>
                
                <!-- Medical-Specific Metrics -->
                <g transform="translate(600, 20)">
                    <rect x="0" y="0" width="270" height="340" rx="10" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
                    <text x="135" y="25" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="#155724">
                        üè• Medical Metrics
                    </text>
                    
                    <!-- Clinical Relevance -->
                    <g transform="translate(20, 45)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#155724">Clinical Relevance</text>
                        
                        <!-- Radar chart -->
                        <g transform="translate(115, 70)">
                            <polygon points="0,-40 35,-20 35,20 0,40 -35,20 -35,-20" 
                                    fill="none" stroke="#28a745" stroke-width="1" opacity="0.3"/>
                            <polygon points="0,-30 26,-15 26,15 0,30 -26,15 -26,-15" 
                                    fill="#28a745" opacity="0.2"/>
                            
                            <!-- Actual scores -->
                            <polygon points="0,-36 30,-18 28,16 0,32 -25,14 -30,-17" 
                                    fill="#28a745" opacity="0.4" stroke="#155724" stroke-width="2"/>
                            
                            <!-- Labels -->
                            <text x="0" y="-45" text-anchor="middle" font-size="9" fill="#555">Accuracy</text>
                            <text x="40" y="-20" text-anchor="start" font-size="9" fill="#555">Evidence</text>
                            <text x="40" y="25" text-anchor="start" font-size="9" fill="#555">Safety</text>
                            <text x="0" y="50" text-anchor="middle" font-size="9" fill="#555">Relevance</text>
                            <text x="-40" y="25" text-anchor="end" font-size="9" fill="#555">Clarity</text>
                            <text x="-40" y="-20" text-anchor="end" font-size="9" fill="#555">Currency</text>
                        </g>
                    </g>
                    
                    <!-- Evidence Quality Score -->
                    <g transform="translate(20, 180)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#155724">Evidence Quality</text>
                        
                        <!-- Stacked bar for evidence levels -->
                        <rect x="0" y="20" width="230" height="40" rx="4" fill="#e8f5e9"/>
                        <g transform="translate(5, 30)">
                            <rect x="0" y="0" width="92" height="20" fill="#1e7e34"/>
                            <rect x="92" y="0" width="69" height="20" fill="#28a745"/>
                            <rect x="161" y="0" width="46" height="20" fill="#81c784"/>
                            <rect x="207" y="0" width="13" height="20" fill="#c8e6c9"/>
                            
                            <text x="46" y="13" text-anchor="middle" font-size="9" fill="white">RCT 40%</text>
                            <text x="126" y="13" text-anchor="middle" font-size="9" fill="white">Cohort 30%</text>
                            <text x="184" y="13" text-anchor="middle" font-size="9" fill="white">Case 20%</text>
                        </g>
                        
                        <text x="0" y="80" font-family="Aptos" font-size="11" fill="#555">Weighted score: 8.2/10</text>
                    </g>
                    
                    <!-- Citation Accuracy -->
                    <g transform="translate(20, 275)">
                        <text x="0" y="12" font-family="Aptos" font-size="13" font-weight="600" fill="#155724">Citation Accuracy</text>
                        
                        <!-- Donut chart -->
                        <g transform="translate(115, 40)">
                            <circle cx="0" cy="0" r="25" fill="none" stroke="#e0e0e0" stroke-width="12"/>
                            <circle cx="0" cy="0" r="25" fill="none" stroke="#28a745" stroke-width="12"
                                    stroke-dasharray="154 160"
                                    stroke-dashoffset="40"
                                    transform="rotate(-90)">
                                <animate attributeName="stroke-dasharray" from="0 160" to="154 160" dur="1.5s" fill="freeze"/>
                            </circle>
                            <text x="0" y="5" text-anchor="middle" font-family="Aptos" font-size="14" font-weight="700" fill="#155724">98.5%</text>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        
        <div class="threshold-guide">
            <div class="guide-title">üéØ Target Thresholds for Production</div>
            <div class="thresholds">
                <div class="threshold">Precision@10: >90%</div>
                <div class="threshold">NDCG: >0.8</div>
                <div class="threshold">ROUGE-L: >0.7</div>
                <div class="threshold">Hallucination: <5%</div>
            </div>
        </div>
    </div>
</body>
</html>