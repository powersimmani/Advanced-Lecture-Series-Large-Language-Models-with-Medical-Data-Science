<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caching Optimization</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 960px;
            height: 540px;
            padding: 35px 45px;
            background: white;
        }
        .title {
            font-size: 32px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .cache-layers {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .redis-config {
            background: #f0f5fc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .config-title {
            font-size: 16px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        .config-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .config-item {
            font-size: 13px;
            color: #555;
            padding: 8px;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #1E64C8;
        }
        
        .performance-impact {
            background: #fff8e6;
            border-radius: 8px;
            padding: 15px;
        }
        .impact-title {
            font-size: 16px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        .metrics {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .metric {
            font-size: 14px;
            color: #333;
            padding: 8px;
            background: white;
            border-radius: 5px;
        }
        
        @keyframes cacheCheck {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .cache-flow {
            animation: cacheCheck 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Caching Optimization</div>
        
        <div class="cache-layers">
            <svg width="850" height="260" viewBox="0 0 850 260" xmlns="http://www.w3.org/2000/svg">
                <!-- Request arrow -->
                <text x="20" y="30" font-family="Aptos" font-size="16" font-weight="600" fill="#1E64C8">Request ‚Üí</text>
                
                <!-- L1: Query Cache -->
                <g>
                    <rect x="150" y="10" width="200" height="70" rx="10" fill="url(#grad1)" stroke="#1E64C8" stroke-width="3"/>
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#1E64C8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#2874d8;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <text x="250" y="35" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="white">L1: Query Cache</text>
                    <text x="250" y="52" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">Exact query match</text>
                    <text x="250" y="66" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">TTL: 1h ‚Ä¢ Hit: 40%</text>
                    
                    <!-- Cache icon -->
                    <circle cx="180" cy="45" r="12" fill="white" opacity="0.3"/>
                    <path d="M 176 45 L 180 49 L 184 41" stroke="white" stroke-width="2" fill="none"/>
                </g>
                
                <!-- Miss arrow L1 to L2 -->
                <g class="cache-flow">
                    <line x1="250" y1="85" x2="250" y2="105" stroke="#1E64C8" stroke-width="3" stroke-dasharray="5,3"/>
                    <text x="260" y="98" font-family="Aptos" font-size="11" fill="#666">Miss ‚Üì</text>
                </g>
                
                <!-- L2: Embedding Cache -->
                <g>
                    <rect x="150" y="110" width="200" height="70" rx="10" fill="url(#grad2)" stroke="#2874d8" stroke-width="3"/>
                    <defs>
                        <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#2874d8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#4a90e2;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <text x="250" y="135" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="white">L2: Embedding Cache</text>
                    <text x="250" y="152" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">Vector embeddings</text>
                    <text x="250" y="166" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">TTL: 24h ‚Ä¢ Hit: 70%</text>
                    
                    <!-- Vector icon -->
                    <g opacity="0.3">
                        <line x1="175" y1="140" x2="185" y2="135" stroke="white" stroke-width="2"/>
                        <line x1="175" y1="140" x2="185" y2="145" stroke="white" stroke-width="2"/>
                        <line x1="175" y1="140" x2="185" y2="150" stroke="white" stroke-width="2"/>
                    </g>
                </g>
                
                <!-- Miss arrow L2 to L3 -->
                <g class="cache-flow" style="animation-delay: 1s;">
                    <line x1="250" y1="185" x2="250" y2="205" stroke="#1E64C8" stroke-width="3" stroke-dasharray="5,3"/>
                    <text x="260" y="198" font-family="Aptos" font-size="11" fill="#666">Miss ‚Üì</text>
                </g>
                
                <!-- L3: Document Cache -->
                <g>
                    <rect x="150" y="210" width="200" height="70" rx="10" fill="url(#grad3)" stroke="#4a90e2" stroke-width="3"/>
                    <defs>
                        <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#6ba3e8;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <text x="250" y="235" text-anchor="middle" font-family="Aptos" font-size="16" font-weight="700" fill="white">L3: Document Cache</text>
                    <text x="250" y="252" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">Retrieved documents</text>
                    <text x="250" y="266" text-anchor="middle" font-family="Aptos" font-size="11" fill="white">TTL: 7d ‚Ä¢ Hit: 85%</text>
                    
                    <!-- Document icon -->
                    <g opacity="0.3">
                        <rect x="173" y="235" width="14" height="18" rx="2" fill="white"/>
                        <line x1="176" y1="240" x2="184" y2="240" stroke="#4a90e2" stroke-width="1"/>
                        <line x1="176" y1="244" x2="184" y2="244" stroke="#4a90e2" stroke-width="1"/>
                        <line x1="176" y1="248" x2="181" y2="248" stroke="#4a90e2" stroke-width="1"/>
                    </g>
                </g>
                
                <!-- Right side: Performance metrics -->
                <g transform="translate(400, 0)">
                    <rect x="0" y="10" width="420" height="270" rx="10" fill="#f8f9fa" opacity="0.5"/>
                    
                    <!-- Hit path -->
                    <text x="210" y="35" text-anchor="middle" font-family="Aptos" font-size="14" font-weight="700" fill="#28a745">‚úì Cache Hit Path</text>
                    
                    <!-- Response time graph -->
                    <g transform="translate(60, 60)">
                        <!-- L1 hit bar -->
                        <rect x="0" y="0" width="80" height="30" rx="5" fill="#28a745" opacity="0.8"/>
                        <text x="90" y="20" font-family="Aptos" font-size="13" fill="#333">L1: ~20ms</text>
                        
                        <!-- L2 hit bar -->
                        <rect x="0" y="40" width="120" height="30" rx="5" fill="#ffc107" opacity="0.8"/>
                        <text x="130" y="60" font-family="Aptos" font-size="13" fill="#333">L2: ~50ms</text>
                        
                        <!-- L3 hit bar -->
                        <rect x="0" y="80" width="160" height="30" rx="5" fill="#ff9800" opacity="0.8"/>
                        <text x="170" y="100" font-family="Aptos" font-size="13" fill="#333">L3: ~80ms</text>
                        
                        <!-- Cache miss bar -->
                        <rect x="0" y="120" width="300" height="30" rx="5" fill="#dc3545" opacity="0.8"/>
                        <text x="310" y="140" font-family="Apots" font-size="13" fill="#333">Miss: ~200ms</text>
                    </g>
                    
                    <!-- Savings box -->
                    <rect x="20" y="200" width="380" height="50" rx="8" fill="#fff8e6"/>
                    <text x="210" y="220" text-anchor="middle" font-family="Aptos" font-size="14" font-weight="700" fill="#1E64C8">Overall Latency: 200ms ‚Üí 20ms (90% reduction)</text>
                    <text x="210" y="240" text-anchor="middle" font-family="Aptos" font-size="13" fill="#666">Cost savings: 60% | DB load: -80%</text>
                </g>
                
                <!-- Flow indicators -->
                <g class="cache-flow" style="animation-delay: 0.5s;">
                    <circle cx="120" cy="45" r="4" fill="#1E64C8"/>
                    <circle cx="120" cy="145" r="4" fill="#2874d8"/>
                    <circle cx="120" cy="245" r="4" fill="#4a90e2"/>
                </g>
            </svg>
        </div>
        
        <div class="redis-config">
            <div class="config-title">‚öôÔ∏è Redis Configuration</div>
            <div class="config-items">
                <div class="config-item">
                    <strong>Memory:</strong> 16GB with LRU eviction
                </div>
                <div class="config-item">
                    <strong>Persistence:</strong> RDB + AOF for durability
                </div>
                <div class="config-item">
                    <strong>Cluster:</strong> 3 nodes with replication
                </div>
            </div>
        </div>
        
        <div class="performance-impact">
            <div class="impact-title">üìä Performance Impact</div>
            <div class="metrics">
                <div class="metric">Latency reduction: <strong>200ms ‚Üí 20ms</strong></div>
                <div class="metric">Cost savings: <strong>60% reduction</strong></div>
                <div class="metric">DB load: <strong>-80%</strong></div>
            </div>
        </div>
        
    </div>
</body>
</html>
