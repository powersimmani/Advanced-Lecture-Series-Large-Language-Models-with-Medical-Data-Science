<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expert Routing Strategies & Selection Mechanisms</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            width: 960px;
            height: 540px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 20px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 18px;
            text-align: center;
        }
        
        .routing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .routing-card {
            background: white;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s;
            position: relative;
        }
        
        .routing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
            background: #f8fbff;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .card-title {
            font-size: 17px;
            font-weight: 700;
            color: #1E64C8;
        }
        
        .badge {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .badge-efficient {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-smooth {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .badge-balanced {
            background: #fff3cd;
            color: #856404;
        }
        
        .card-text {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
            margin-bottom: 6px;
        }
        
        .highlight-box {
            background: #f0f5fc;
            border: 2px solid #1E64C8;
            border-radius: 8px;
            padding: 12px 20px;
        }
        
        .highlight-title {
            font-size: 16px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 6px;
            text-align: center;
        }
        
        .highlight-text {
            font-size: 14px;
            color: #333;
            text-align: center;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Expert Routing Strategies & Selection Mechanisms</div>
        
        <div class="routing-grid">
            <!-- Top-K Routing -->
            <div class="routing-card">
                <div class="card-header">
                    <div class="card-title">Top-K Routing</div>
                    <span class="badge badge-efficient">‚≠ê Most Used</span>
                </div>
                
                <svg width="405" height="140" viewBox="0 0 405 140">
                    <!-- Token input -->
                    <circle cx="50" cy="30" r="20" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="50" y="35" text-anchor="middle" font-family="Aptos" font-size="11" fill="#1E64C8">Token</text>
                    
                    <!-- Router -->
                    <rect x="100" y="10" width="80" height="40" rx="6" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
                    <text x="140" y="28" text-anchor="middle" font-family="Aptos" font-size="11" font-weight="600" fill="#856404">Router</text>
                    <text x="140" y="42" text-anchor="middle" font-family="Aptos" font-size="9" fill="#856404">Top-2</text>
                    
                    <path d="M 70 30 L 100 30" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <!-- Routing scores -->
                    <text x="210" y="18" font-family="Aptos" font-size="9" fill="#666">0.65</text>
                    <text x="210" y="32" font-family="Aptos" font-size="9" fill="#666">0.25</text>
                    <text x="210" y="46" font-family="Aptos" font-size="9" fill="#666">0.08</text>
                    
                    <!-- Experts -->
                    <circle cx="270" cy="15" r="18" fill="#28a745" stroke="#1e7e34" stroke-width="2"/>
                    <text x="270" y="19" text-anchor="middle" font-family="Aptos" font-size="10" font-weight="600" fill="white">E1 ‚úì</text>
                    
                    <path d="M 180 25 L 250 15" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead-green)"/>
                    
                    <circle cx="270" cy="45" r="18" fill="#28a745" stroke="#1e7e34" stroke-width="2"/>
                    <text x="270" y="49" text-anchor="middle" font-family="Aptos" font-size="10" font-weight="600" fill="white">E3 ‚úì</text>
                    
                    <path d="M 180 35 L 250 45" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead-green)"/>
                    
                    <circle cx="270" cy="75" r="18" fill="#e9ecef" stroke="#adb5bd" stroke-width="1.5"/>
                    <text x="270" y="79" text-anchor="middle" font-family="Aptos" font-size="10" fill="#999">E5</text>
                    
                    <text x="310" y="48" font-family="Aptos" font-size="10" fill="#28a745" font-weight="600">Selected</text>
                    <text x="310" y="78" font-family="Aptos" font-size="10" fill="#999">Ignored</text>
                    
                    <!-- Arrow markers -->
                    <defs>
                        <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="7" refY="2.5" orient="auto">
                            <polygon points="0 0, 8 2.5, 0 5" fill="#1E64C8"/>
                        </marker>
                        <marker id="arrowhead-green" markerWidth="8" markerHeight="8" refX="7" refY="2.5" orient="auto">
                            <polygon points="0 0, 8 2.5, 0 5" fill="#28a745"/>
                        </marker>
                    </defs>
                </svg>
                
                <div class="card-text">‚Ä¢ Select K experts with highest scores</div>
                <div class="card-text">‚Ä¢ Typical K=2 for efficiency</div>
                <div class="card-text">‚Ä¢ Ensures sparse activation</div>
            </div>
            
            <!-- Soft Routing -->
            <div class="routing-card">
                <div class="card-header">
                    <div class="card-title">Soft Routing</div>
                    <span class="badge badge-smooth">Smooth</span>
                </div>
                
                <svg width="405" height="140" viewBox="0 0 405 140">
                    <!-- Token input -->
                    <circle cx="50" cy="45" r="20" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="50" y="50" text-anchor="middle" font-family="Aptos" font-size="11" fill="#1E64C8">Token</text>
                    
                    <!-- Router -->
                    <rect x="100" y="25" width="80" height="40" rx="6" fill="#d1ecf1" stroke="#17a2b8" stroke-width="2"/>
                    <text x="140" y="43" text-anchor="middle" font-family="Aptos" font-size="11" font-weight="600" fill="#0c5460">Soft Router</text>
                    <text x="140" y="57" text-anchor="middle" font-family="Aptos" font-size="9" fill="#0c5460">All weighted</text>
                    
                    <path d="M 70 45 L 100 45" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    
                    <!-- All experts with different weights -->
                    <g opacity="1">
                        <circle cx="270" cy="20" r="16" fill="#4ecdc4" fill-opacity="0.9"/>
                        <text x="270" y="24" text-anchor="middle" font-family="Aptos" font-size="9" font-weight="600" fill="white">E1</text>
                        <text x="310" y="24" font-family="Aptos" font-size="9" fill="#666">w=0.50</text>
                        <path d="M 180 40 L 252 23" stroke="#4ecdc4" stroke-width="3" opacity="0.9"/>
                    </g>
                    
                    <g opacity="0.7">
                        <circle cx="270" cy="50" r="14" fill="#4ecdc4" fill-opacity="0.7"/>
                        <text x="270" y="54" text-anchor="middle" font-family="Aptos" font-size="9" font-weight="600" fill="white">E2</text>
                        <text x="310" y="54" font-family="Aptos" font-size="9" fill="#666">w=0.30</text>
                        <path d="M 180 47 L 254 50" stroke="#4ecdc4" stroke-width="2.5" opacity="0.7"/>
                    </g>
                    
                    <g opacity="0.4">
                        <circle cx="270" cy="78" r="11" fill="#4ecdc4" fill-opacity="0.4"/>
                        <text x="270" y="82" text-anchor="middle" font-family="Aptos" font-size="8" font-weight="600" fill="white">E3</text>
                        <text x="305" y="82" font-family="Aptos" font-size="9" fill="#666">w=0.15</text>
                        <path d="M 180 53 L 258 75" stroke="#4ecdc4" stroke-width="2" opacity="0.4"/>
                    </g>
                    
                    <g opacity="0.2">
                        <circle cx="270" cy="102" r="8" fill="#4ecdc4" fill-opacity="0.2"/>
                        <text x="270" y="105" text-anchor="middle" font-family="Aptos" font-size="7" font-weight="600" fill="white">E4</text>
                        <text x="300" y="105" font-family="Aptos" font-size="9" fill="#666">w=0.05</text>
                        <path d="M 180 58 L 261 99" stroke="#4ecdc4" stroke-width="1.5" opacity="0.2"/>
                    </g>
                    
                    <defs>
                        <marker id="arrowhead2" markerWidth="8" markerHeight="8" refX="7" refY="2.5" orient="auto">
                            <polygon points="0 0, 8 2.5, 0 5" fill="#1E64C8"/>
                        </marker>
                    </defs>
                </svg>
                
                <div class="card-text">‚Ä¢ Weighted combination of all experts</div>
                <div class="card-text">‚Ä¢ Smoother gradients during training</div>
                <div class="card-text">‚Ä¢ Higher computational cost</div>
            </div>
            
            <!-- Token Choice -->
            <div class="routing-card">
                <div class="card-header">
                    <div class="card-title">Token Choice</div>
                    <span class="badge badge-efficient">Specialized</span>
                </div>
                
                <svg width="405" height="140" viewBox="0 0 405 140">
                    <!-- Multiple tokens -->
                    <circle cx="40" cy="30" r="15" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="40" y="34" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T1</text>
                    
                    <circle cx="40" cy="60" r="15" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="40" y="64" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T2</text>
                    
                    <circle cx="40" cy="90" r="15" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="40" y="94" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T3</text>
                    
                    <text x="85" y="63" font-family="Aptos" font-size="10" fill="#666" font-weight="600">Each selects</text>
                    
                    <!-- Experts -->
                    <g>
                        <rect x="160" y="15" width="70" height="30" rx="4" fill="#28a745" fill-opacity="0.3" stroke="#28a745" stroke-width="2"/>
                        <text x="195" y="34" text-anchor="middle" font-family="Aptos" font-size="10" fill="#155724">Expert 1</text>
                        <path d="M 55 30 L 160 28" stroke="#28a745" stroke-width="2"/>
                    </g>
                    
                    <g>
                        <rect x="250" y="45" width="70" height="30" rx="4" fill="#ffc107" fill-opacity="0.3" stroke="#ffc107" stroke-width="2"/>
                        <text x="285" y="64" text-anchor="middle" font-family="Aptos" font-size="10" fill="#856404">Expert 3</text>
                        <path d="M 55 60 L 250 60" stroke="#ffc107" stroke-width="2"/>
                    </g>
                    
                    <g>
                        <rect x="160" y="75" width="70" height="30" rx="4" fill="#1E64C8" fill-opacity="0.3" stroke="#1E64C8" stroke-width="2"/>
                        <text x="195" y="94" text-anchor="middle" font-family="Aptos" font-size="10" fill="#0d3c61">Expert 2</text>
                        <path d="M 55 90 L 160 92" stroke="#1E64C8" stroke-width="2"/>
                    </g>
                    
                    <text x="350" y="50" font-family="Aptos" font-size="9" fill="#dc3545">‚ö†Ô∏è Can cause</text>
                    <text x="350" y="64" font-family="Aptos" font-size="9" fill="#dc3545">load imbalance</text>
                </svg>
                
                <div class="card-text">‚Ä¢ Each token selects its experts</div>
                <div class="card-text">‚Ä¢ Better specialization</div>
                <div class="card-text">‚Ä¢ Can lead to load imbalance</div>
            </div>
            
            <!-- Expert Choice -->
            <div class="routing-card">
                <div class="card-header">
                    <div class="card-title">Expert Choice</div>
                    <span class="badge badge-balanced">Balanced</span>
                </div>
                
                <svg width="405" height="140" viewBox="0 0 405 140">
                    <!-- Experts on left -->
                    <g>
                        <rect x="40" y="15" width="70" height="28" rx="4" fill="#28a745" fill-opacity="0.3" stroke="#28a745" stroke-width="2"/>
                        <text x="75" y="32" text-anchor="middle" font-family="Aptos" font-size="10" fill="#155724">Expert 1</text>
                    </g>
                    
                    <g>
                        <rect x="40" y="50" width="70" height="28" rx="4" fill="#ffc107" fill-opacity="0.3" stroke="#ffc107" stroke-width="2"/>
                        <text x="75" y="67" text-anchor="middle" font-family="Aptos" font-size="10" fill="#856404">Expert 2</text>
                    </g>
                    
                    <g>
                        <rect x="40" y="85" width="70" height="28" rx="4" fill="#1E64C8" fill-opacity="0.3" stroke="#1E64C8" stroke-width="2"/>
                        <text x="75" y="102" text-anchor="middle" font-family="Aptos" font-size="10" fill="#0d3c61">Expert 3</text>
                    </g>
                    
                    <text x="145" y="63" font-family="Aptos" font-size="10" fill="#666" font-weight="600">Each selects</text>
                    
                    <!-- Tokens on right -->
                    <circle cx="250" cy="25" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="250" y="29" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T1</text>
                    <path d="M 110 27 L 235 25" stroke="#28a745" stroke-width="2"/>
                    
                    <circle cx="300" cy="35" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="300" y="39" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T4</text>
                    <path d="M 110 32 L 285 35" stroke="#28a745" stroke-width="2"/>
                    
                    <circle cx="250" cy="64" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="250" y="68" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T2</text>
                    <path d="M 110 64 L 235 64" stroke="#ffc107" stroke-width="2"/>
                    
                    <circle cx="300" cy="74" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="300" y="78" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T5</text>
                    <path d="M 110 69 L 285 74" stroke="#ffc107" stroke-width="2"/>
                    
                    <circle cx="250" cy="103" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="250" y="107" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T3</text>
                    <path d="M 110 96 L 235 103" stroke="#1E64C8" stroke-width="2"/>
                    
                    <circle cx="300" cy="113" r="14" fill="#e8f4fd" stroke="#1E64C8" stroke-width="2"/>
                    <text x="300" y="117" text-anchor="middle" font-family="Aptos" font-size="9" fill="#1E64C8">T6</text>
                    <path d="M 110 101 L 285 113" stroke="#1E64C8" stroke-width="2"/>
                    
                    <text x="350" y="65" font-family="Aptos" font-size="9" fill="#28a745">‚úì Natural</text>
                    <text x="350" y="79" font-family="Aptos" font-size="9" fill="#28a745">load balance</text>
                </svg>
                
                <div class="card-text">‚Ä¢ Experts select tokens to process</div>
                <div class="card-text">‚Ä¢ Natural load balancing</div>
                <div class="card-text">‚Ä¢ Used in Switch Transformer (Google)</div>
            </div>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-title">üéØ Routing Strategy Trade-offs</div>
            <div class="highlight-text">
                Different routing strategies balance between specialization quality, computational efficiency, and load balancing. 
                Medical AI typically uses <strong>Top-2 routing</strong> for optimal performance with sparse activation.
            </div>
        </div>
    </div>
</body>
</html>